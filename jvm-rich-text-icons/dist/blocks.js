(()=>{"use strict";var e={n:t=>{var i=t&&t.__esModule?()=>t.default:()=>t;return e.d(i,{a:i}),i},d:(t,i)=>{for(var n in i)e.o(i,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:i[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const t=window.wp.i18n,i=window.wp.richText,n=window.wp.element,s=window.wp.blocks,o=window.wp.blockEditor,r=window.wp.components,c=window.wp.domReady;var a=e.n(c);const l=window.wp.compose,d=window.ReactJSXRuntime;function h({icons:e,classPrefix:i,selectedIcon:s,onSelect:o}){const[c,a]=(0,n.useState)(""),l=(0,n.useMemo)(()=>{if(!c)return e;const t=c.toLowerCase();return e.filter(e=>-1!==e.toLowerCase().indexOf(t))},[e,c]);return(0,d.jsxs)("div",{className:"jvm-richtext-icons-picker",children:[(0,d.jsx)(r.TextControl,{value:c,placeholder:(0,t.__)("Search","jvm-richtext-icons"),onChange:a}),(0,d.jsx)("div",{className:"jvm-richtext-icons-panel",children:l.length>0?(0,d.jsx)("ul",{className:"jvm-richtext-icons-list",children:l.map(e=>(0,d.jsx)("li",{"data-key":e,children:(0,d.jsx)(r.Tooltip,{text:e,children:(0,d.jsx)(r.Button,{isTertiary:!0,className:e===s?"is-selected":"",onClick:()=>o(e),children:(0,d.jsx)("i",{className:i+" "+e,"aria-hidden":"true"})})})},e))}):(0,d.jsx)("p",{children:(0,t.__)("No icons found.","jvm-richtext-icons")})})]})}let p=jvm_richtext_icon_settings.iconset,u=jvm_richtext_icon_settings.base_class;class x extends n.Component{constructor(){super(...arguments),this.toggle=this.toggle.bind(this),this.state={isOpen:!1}}toggle(){this.setState(e=>({isOpen:!e.isOpen}))}render(){const{isOpen:e}=this.state,{name:s,value:c,onChange:a}=this.props;return(0,d.jsx)(n.Fragment,{children:(0,d.jsx)(o.BlockControls,{children:(0,d.jsxs)(r.ToolbarGroup,{children:[(0,d.jsx)(r.ToolbarButton,{icon:"flag","aria-haspopup":"true",label:(0,t.__)("Insert Icon","jvm-richtext-icons"),onClick:this.toggle}),e&&(0,d.jsx)(r.Popover,{className:"jvm-richtext-icons-popover",position:"bottom left",onClick:()=>{},expandOnMobile:!1,headerTitle:(0,t.__)("Insert Icon","jvm-richtext-icons"),onClose:()=>{a((0,i.toggleFormat)(c,{type:s}))},children:(0,d.jsx)(h,{icons:p,classPrefix:u,onSelect:e=>{let t=(0,i.create)({html:'<i class="'+u+" "+e+'" aria-hidden="true"> </i>'});a((0,i.insert)(c,t)),this.toggle()}})},"icon-popover")]})})})}}const m=(0,l.compose)()(x),j="jvm/insert-icons",g={name:j,title:(0,t.__)("Insert Icon","jvm-richtext-icons"),tagName:"i",className:null,edit:({isOpen:e,value:t,onChange:i,activeAttributes:s})=>(0,d.jsx)(n.Fragment,{children:(0,d.jsx)(m,{name:j,isOpen:e,value:t,onChange:i,activeAttributes:s})})};a()(function(){[g].forEach(({name:e,...t})=>{e&&(0,i.registerFormatType)(e,t)})}),(0,s.registerBlockType)("jvm/single-icon",{title:(0,t.__)("Single icon"),icon:"flag",category:"common",keywords:[(0,t.__)("Icon")],supports:{color:{text:!0,background:!0},spacing:{margin:!0,padding:!0}},attributes:{icon:{type:"string"},fontSize:{type:"number"}},edit:e=>{let i=jvm_richtext_icon_settings.iconset,n="",s=32,c=jvm_richtext_icon_settings.base_class;void 0!==e.attributes.icon?n=e.attributes.icon:void 0!==i[0]&&(n=i[0]),void 0!==e.attributes.fontSize&&(s=e.attributes.fontSize),e.setAttributes({icon:n,fontSize:s});let a=c+" "+e.attributes.icon,l={fontSize:e.attributes.fontSize+"px"};const p=(0,o.useBlockProps)();return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(o.InspectorControls,{children:(0,d.jsxs)(r.PanelBody,{label:(0,t.__)("Icon"),children:[(0,d.jsx)(h,{icons:i,classPrefix:c,selectedIcon:n,onSelect:t=>e.setAttributes({icon:t})}),(0,d.jsx)(r.RangeControl,{label:(0,t.__)("Font Size (px)"),value:s,min:10,max:200,onChange:t=>{t&&e.setAttributes({fontSize:t})}})]})}),(0,d.jsx)("div",{...p,children:(0,d.jsx)("i",{className:a,"aria-hidden":"true",style:l,children:" "})})]})},save:e=>{const t=o.useBlockProps.save();let i=jvm_richtext_icon_settings.base_class+" "+e.attributes.icon,n={fontSize:e.attributes.fontSize+"px"};return(0,d.jsx)("div",{...t,children:(0,d.jsx)("i",{className:i,"aria-hidden":"true",style:n,children:" "})})}})})();