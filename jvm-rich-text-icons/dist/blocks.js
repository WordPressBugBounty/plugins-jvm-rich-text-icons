(()=>{"use strict";var e={n:t=>{var i=t&&t.__esModule?()=>t.default:()=>t;return e.d(i,{a:i}),i},d:(t,i)=>{for(var s in i)e.o(i,s)&&!e.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:i[s]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const t=window.wp.i18n,i=window.wp.richText,s=window.wp.element,n=window.wp.blocks,o=window.wp.blockEditor,r=window.wp.components,a=window.wp.domReady;var c=e.n(a);const l=window.wp.compose,d=window.ReactJSXRuntime;let h=jvm_richtext_icon_settings.iconset,p=jvm_richtext_icon_settings.base_class;class m extends s.Component{constructor(){super(...arguments),this.toggle=this.toggle.bind(this),this.state={icons:h,isOpen:!1,keyword:""}}search(e){let t=[];for(let i of h)-1!==i.toLowerCase().search(e.toLowerCase())&&t.push(i);this.setState({keyword:e,icons:t})}toggle(){this.setState(e=>({isOpen:!e.isOpen})),this.setState({keyword:"",icons:h})}render(){const{isOpen:e,icons:n,keyword:a}=this.state,{name:c,value:l,onChange:h}=this.props;return(0,d.jsx)(s.Fragment,{children:(0,d.jsx)(o.BlockControls,{children:(0,d.jsxs)(r.ToolbarGroup,{children:[(0,d.jsx)(r.ToolbarButton,{icon:"flag","aria-haspopup":"true",label:(0,t.__)("Insert Icon","jvm-richtext-icons"),onClick:this.toggle}),e&&(0,d.jsxs)(r.Popover,{className:"jvm-richtext-icons-popover",position:"bottom left",onClick:()=>{},expandOnMobile:!1,headerTitle:(0,t.__)("Insert Icon","jvm-richtext-icons"),onClose:()=>{h((0,i.toggleFormat)(l,{type:c}))},children:[(0,d.jsx)(r.TextControl,{value:a,placeholder:(0,t.__)("Search","jvm-richtext-icons"),onChange:e=>{this.search(e)}}),(0,d.jsx)("div",{className:"jvm-richtext-icons-panel",children:n.length>0?(0,d.jsx)("ul",{className:"jvm-richtext-icons-list",children:n.map(e=>(0,d.jsx)("li",{"data-key":e,children:(0,d.jsx)(r.Tooltip,{text:e,children:(0,d.jsx)(r.Button,{isTertiary:!0,onClick:()=>{let t=(0,i.create)({html:'<i class="'+p+" "+e+'" aria-hidden="true"> </i>'});h((0,i.insert)(l,t)),this.toggle()},children:(0,d.jsx)("i",{className:p+" "+e,"aria-hidden":"true"})})})}))}):(0,d.jsx)("p",{children:(0,t.__)("No characters found.","block-options")})})]},"icon-popover")]})})})}}const u=(0,l.compose)()(m),x="jvm/insert-icons",_={name:x,title:(0,t.__)("Insert Icon","jvm-richtext-icons"),tagName:"i",className:null,edit:({isOpen:e,value:t,onChange:i,activeAttributes:n})=>(0,d.jsx)(s.Fragment,{children:(0,d.jsx)(u,{name:x,isOpen:e,value:t,onChange:i,activeAttributes:n})})};c()(function(){[_].forEach(({name:e,...t})=>{e&&(0,i.registerFormatType)(e,t)})}),(0,n.registerBlockType)("jvm/single-icon",{title:(0,t.__)("Single icon"),icon:"flag",category:"common",keywords:[(0,t.__)("Icon")],attributes:{icon:{type:"string"},fontSize:{type:"number"}},edit:e=>{let i=jvm_richtext_icon_settings.iconset,s=[],n="",a=32,c=jvm_richtext_icon_settings.base_class;for(let e of i)s.push({value:e,label:e});void 0!==e.attributes.icon?n=e.attributes.icon:void 0!==i[0]&&(n=i[0]),void 0!==e.attributes.fontSize&&(a=e.attributes.fontSize),e.setAttributes({icon:n,fontSize:a});let l=c+" "+e.attributes.icon,h={fontSize:e.attributes.fontSize+"px"};return[(0,d.jsx)(o.InspectorControls,{children:(0,d.jsxs)(r.PanelBody,{label:(0,t.__)("Icon"),children:[(0,d.jsx)(r.ComboboxControl,{label:(0,t.__)("Icon"),value:n,onChange:t=>{t&&e.setAttributes({icon:t})},options:s,__experimentalRenderItem:e=>{let t=c+" "+e.item.value;return(0,d.jsxs)("span",{children:[(0,d.jsx)("i",{class:t,"aria-hidden":"true",children:" "})," ",e.item.value]})},isMulti:"false"}),(0,d.jsx)(r.RangeControl,{label:(0,t.__)("Font Size (px)"),value:a,min:"10",max:"200",onChange:t=>{t&&e.setAttributes({fontSize:t})}})]})}),(0,d.jsx)("div",{className:e.className,children:(0,d.jsx)("i",{class:l,"aria-hidden":"true",style:h,children:" "})})]},save:e=>{let t=jvm_richtext_icon_settings.base_class+" "+e.attributes.icon,i={fontSize:e.attributes.fontSize+"px"};return(0,d.jsx)("div",{className:e.className,children:(0,d.jsx)("i",{class:t,"aria-hidden":"true",style:i,children:" "})})}})})();